{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Output } from '@angular/core';\nimport { ReactiveFormsModule, Validators } from \"@angular/forms\";\nimport { MatFormField, MatFormFieldModule, MatHint, MatLabel } from \"@angular/material/form-field\";\nimport { MatInput } from \"@angular/material/input\";\nimport { MatDatepicker, MatDatepickerInput, MatDatepickerToggle } from \"@angular/material/datepicker\";\nimport { MatNativeDateModule } from \"@angular/material/core\";\nimport { DatePipe } from \"@angular/common\";\nlet BrowserFormComponent = class BrowserFormComponent {\n  constructor(fb, fs, datePipe) {\n    this.fb = fb;\n    this.fs = fs;\n    this.datePipe = datePipe;\n    this.flightsSender = new EventEmitter();\n    this.locationsSender = new EventEmitter();\n    this.locations = [];\n    this.flightForm = this.fb.group({\n      origin: ['', Validators.required],\n      destination: ['', Validators.required],\n      adults: [0, Validators.required],\n      dateOfDeparture: ['', Validators.required],\n      dateOfReturn: ['', Validators.required]\n    });\n  }\n  onSubmit() {\n    const originValue = this.flightForm.get('origin').value;\n    const destination = this.flightForm.get('destination').value;\n    const dateOfReturn = this.flightForm.get('dateOfReturn')?.value;\n    console.log(dateOfReturn, 'szubidubi');\n    console.log(this.flightForm.value);\n    if (originValue && destination) {\n      this.locations[0] = originValue;\n      this.locations[1] = destination;\n      this.locationsSender.emit(this.locations);\n      this.fs.searchCodeForCity(originValue).subscribe(res => {\n        this.flightForm.get('origin')?.setValue(res.data[0].address.cityCode);\n        console.log(this.flightForm.get('origin')?.value);\n        this.fs.searchCodeForCity(destination).subscribe(res => {\n          this.flightForm.get('destination')?.setValue(res.data[0].address.cityCode);\n          console.log(this.flightForm.get('destination')?.value);\n          this.fs.showAvailableFlights(this.flightForm).subscribe(res => {\n            this.availableFlights = res.data;\n            console.log(res);\n            console.log(this.availableFlights);\n            this.flightsSender.emit(this.availableFlights);\n          });\n        });\n      });\n    }\n  }\n  formatDate(date) {\n    return this.datePipe.transform(date, 'dd-MM-yyyy') || '';\n  }\n  formatDateFromString(dateString) {\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear().toString();\n    return `${day}-${month}-${year}`;\n  }\n};\n__decorate([Output()], BrowserFormComponent.prototype, \"flightsSender\", void 0);\n__decorate([Output()], BrowserFormComponent.prototype, \"locationsSender\", void 0);\nBrowserFormComponent = __decorate([Component({\n  selector: 'app-browser-form',\n  standalone: true,\n  imports: [ReactiveFormsModule, MatLabel, MatFormField, MatInput, MatDatepicker, MatFormFieldModule, MatDatepickerInput, MatNativeDateModule, MatHint, MatDatepickerToggle],\n  providers: [DatePipe],\n  templateUrl: './browser-form.component.html',\n  styleUrls: ['./browser-form.component.scss']\n})], BrowserFormComponent);\nexport { BrowserFormComponent };","map":{"version":3,"names":["Component","EventEmitter","Output","ReactiveFormsModule","Validators","MatFormField","MatFormFieldModule","MatHint","MatLabel","MatInput","MatDatepicker","MatDatepickerInput","MatDatepickerToggle","MatNativeDateModule","DatePipe","BrowserFormComponent","constructor","fb","fs","datePipe","flightsSender","locationsSender","locations","flightForm","group","origin","required","destination","adults","dateOfDeparture","dateOfReturn","onSubmit","originValue","get","value","console","log","emit","searchCodeForCity","subscribe","res","setValue","data","address","cityCode","showAvailableFlights","availableFlights","formatDate","date","transform","formatDateFromString","dateString","Date","day","getDate","toString","padStart","month","getMonth","year","getFullYear","__decorate","selector","standalone","imports","providers","templateUrl","styleUrls"],"sources":["D:\\Projekty\\lot-flight-browser\\frontend\\src\\app\\components\\browser-form\\browser-form.component.ts"],"sourcesContent":["import {Component, EventEmitter, Output} from '@angular/core';\nimport {FormBuilder, FormGroup, ReactiveFormsModule, Validators} from \"@angular/forms\";\nimport {FlightService} from \"../../services/flight/flight.service\";\nimport {MatFormField, MatFormFieldModule, MatHint, MatLabel} from \"@angular/material/form-field\";\nimport {MatInput} from \"@angular/material/input\";\nimport {MatDatepicker, MatDatepickerInput, MatDatepickerToggle} from \"@angular/material/datepicker\";\nimport {MatNativeDateModule} from \"@angular/material/core\";\nimport {DatePipe} from \"@angular/common\";\n\n@Component({\n  selector: 'app-browser-form',\n  standalone: true,\n  imports: [\n    ReactiveFormsModule,\n    MatLabel,\n    MatFormField,\n    MatInput,\n    MatDatepicker,\n    MatFormFieldModule,\n    MatDatepickerInput,\n    MatNativeDateModule,\n    MatHint,\n    MatDatepickerToggle\n  ],\n  providers:[\n    DatePipe\n  ],\n  templateUrl: './browser-form.component.html',\n  styleUrls: ['./browser-form.component.scss']\n})\nexport class BrowserFormComponent {\n  @Output() flightsSender: EventEmitter<Array<any>> = new EventEmitter();\n  @Output() locationsSender: EventEmitter<string[]> = new EventEmitter();\n  availableFlights!:Array<any>;\n  locations:string[] = [];\n  flightForm!: FormGroup;\n\n  constructor(private fb: FormBuilder,\n              private fs: FlightService,\n              private datePipe: DatePipe) {\n    this.flightForm = this.fb.group({\n      origin: ['', Validators.required],\n      destination: ['', Validators.required],\n      adults: [0, Validators.required],\n      dateOfDeparture: ['', Validators.required],\n      dateOfReturn: ['', Validators.required],\n    });\n  }\n\n  onSubmit(){\n    const originValue = this.flightForm.get('origin')!.value;\n    const destination = this.flightForm.get('destination')!.value;\n    const dateOfReturn:string = (this.flightForm.get('dateOfReturn')?.value);\n\n    console.log(dateOfReturn,'szubidubi');\n    console.log(this.flightForm.value)\n   if (originValue && destination){\n     this.locations[0] = originValue;\n     this.locations[1] = destination;\n     this.locationsSender.emit(this.locations);\n     this.fs.searchCodeForCity(originValue).subscribe((res: any)=>{\n       this.flightForm.get('origin')?.setValue(res.data[0].address.cityCode)\n       console.log(this.flightForm.get('origin')?.value);\n\n       this.fs.searchCodeForCity(destination).subscribe((res: any)=>{\n         this.flightForm.get('destination')?.setValue(res.data[0].address.cityCode)\n         console.log(this.flightForm.get('destination')?.value);\n\n         this.fs.showAvailableFlights(this.flightForm).subscribe((res: any)=>{\n           this.availableFlights = res.data;\n           console.log(res)\n           console.log(this.availableFlights);\n           this.flightsSender.emit(this.availableFlights);\n         })\n       });\n     });\n   }\n  }\n  private formatDate(date: Date): string {\n    return this.datePipe.transform(date, 'dd-MM-yyyy') || '';\n  }\n\n  formatDateFromString(dateString: string): string {\n    const date = new Date(dateString);\n    const day = date.getDate().toString().padStart(2, '0');\n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const year = date.getFullYear().toString();\n    return `${day}-${month}-${year}`;\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}