{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Output } from '@angular/core';\nimport { ReactiveFormsModule, Validators } from \"@angular/forms\";\nimport { MatFormField, MatFormFieldModule, MatHint, MatLabel } from \"@angular/material/form-field\";\nimport { MatInput } from \"@angular/material/input\";\nimport { MatDatepicker, MatDatepickerInput, MatDatepickerToggle } from \"@angular/material/datepicker\";\nimport { MatNativeDateModule, provideNativeDateAdapter } from \"@angular/material/core\";\nlet BrowserFormComponent = class BrowserFormComponent {\n  constructor(fb, fs) {\n    this.fb = fb;\n    this.fs = fs;\n    this.flightsSender = new EventEmitter();\n    this.locationsSender = new EventEmitter();\n    this.locations = [];\n    this.flightForm = this.fb.group({\n      origin: ['', Validators.required],\n      destination: ['', Validators.required],\n      adults: [0, Validators.required],\n      dateOfDeparture: [new Date(), Validators.required],\n      dateOfReturn: ['', Validators.required]\n    });\n  }\n  onSubmit() {\n    const originValue = this.flightForm.get('origin').value;\n    const destination = this.flightForm.get('destination').value;\n    console.log(this.flightForm.value);\n    if (originValue && destination) {\n      this.locations[0] = originValue;\n      this.locations[1] = destination;\n      this.locationsSender.emit(this.locations);\n      this.fs.searchCodeForCity(originValue).subscribe(res => {\n        this.flightForm.get('origin')?.setValue(res.data[0].address.cityCode);\n        console.log(this.flightForm.get('origin')?.value);\n        this.fs.searchCodeForCity(destination).subscribe(res => {\n          this.flightForm.get('destination')?.setValue(res.data[0].address.cityCode);\n          console.log(this.flightForm.get('destination')?.value);\n          this.fs.showAvailableFlights(this.flightForm).subscribe(res => {\n            this.availableFlights = res.data;\n            console.log(res);\n            console.log(this.availableFlights);\n            this.flightsSender.emit(this.availableFlights);\n          });\n        });\n      });\n    }\n  }\n};\n__decorate([Output()], BrowserFormComponent.prototype, \"flightsSender\", void 0);\n__decorate([Output()], BrowserFormComponent.prototype, \"locationsSender\", void 0);\nBrowserFormComponent = __decorate([Component({\n  selector: 'app-browser-form',\n  standalone: true,\n  imports: [ReactiveFormsModule, MatLabel, MatFormField, MatInput, MatDatepicker, MatFormFieldModule, MatDatepickerInput, MatNativeDateModule, MatHint, MatDatepickerToggle],\n  providers: [provideNativeDateAdapter()],\n  templateUrl: './browser-form.component.html',\n  styleUrls: ['./browser-form.component.scss']\n})], BrowserFormComponent);\nexport { BrowserFormComponent };","map":{"version":3,"names":["Component","EventEmitter","Output","ReactiveFormsModule","Validators","MatFormField","MatFormFieldModule","MatHint","MatLabel","MatInput","MatDatepicker","MatDatepickerInput","MatDatepickerToggle","MatNativeDateModule","provideNativeDateAdapter","BrowserFormComponent","constructor","fb","fs","flightsSender","locationsSender","locations","flightForm","group","origin","required","destination","adults","dateOfDeparture","Date","dateOfReturn","onSubmit","originValue","get","value","console","log","emit","searchCodeForCity","subscribe","res","setValue","data","address","cityCode","showAvailableFlights","availableFlights","__decorate","selector","standalone","imports","providers","templateUrl","styleUrls"],"sources":["D:\\Projekty\\lot-flight-browser\\frontend\\src\\app\\components\\browser-form\\browser-form.component.ts"],"sourcesContent":["import {Component, EventEmitter, Output} from '@angular/core';\nimport {FormBuilder, FormGroup, ReactiveFormsModule, Validators} from \"@angular/forms\";\nimport {FlightService} from \"../../services/flight/flight.service\";\nimport {MatFormField, MatFormFieldModule, MatHint, MatLabel} from \"@angular/material/form-field\";\nimport {MatInput} from \"@angular/material/input\";\nimport {MatDatepicker, MatDatepickerInput, MatDatepickerToggle} from \"@angular/material/datepicker\";\nimport {MatNativeDateModule, provideNativeDateAdapter} from \"@angular/material/core\";\nimport {DatePipe} from \"@angular/common\";\n\n@Component({\n  selector: 'app-browser-form',\n  standalone: true,\n  imports: [\n    ReactiveFormsModule,\n    MatLabel,\n    MatFormField,\n    MatInput,\n    MatDatepicker,\n    MatFormFieldModule,\n    MatDatepickerInput,\n    MatNativeDateModule,\n    MatHint,\n    MatDatepickerToggle\n  ],\n  providers:[\n    provideNativeDateAdapter()\n  ],\n  templateUrl: './browser-form.component.html',\n  styleUrls: ['./browser-form.component.scss']\n})\nexport class BrowserFormComponent {\n  @Output() flightsSender: EventEmitter<Array<any>> = new EventEmitter();\n  @Output() locationsSender: EventEmitter<string[]> = new EventEmitter();\n  availableFlights!:Array<any>;\n  locations:string[] = [];\n  flightForm!: FormGroup;\n\n  constructor(private fb: FormBuilder,\n              private fs: FlightService) {\n    this.flightForm = this.fb.group({\n      origin: ['', Validators.required],\n      destination: ['', Validators.required],\n      adults: [0, Validators.required],\n      dateOfDeparture: [new Date(), Validators.required],\n      dateOfReturn: ['', Validators.required],\n    });\n  }\n\n  onSubmit(){\n    const originValue = this.flightForm.get('origin')!.value;\n    const destination = this.flightForm.get('destination')!.value;\n    console.log(this.flightForm.value)\n   if (originValue && destination){\n     this.locations[0] = originValue;\n     this.locations[1] = destination;\n     this.locationsSender.emit(this.locations);\n     this.fs.searchCodeForCity(originValue).subscribe((res: any)=>{\n       this.flightForm.get('origin')?.setValue(res.data[0].address.cityCode)\n       console.log(this.flightForm.get('origin')?.value);\n\n       this.fs.searchCodeForCity(destination).subscribe((res: any)=>{\n         this.flightForm.get('destination')?.setValue(res.data[0].address.cityCode)\n         console.log(this.flightForm.get('destination')?.value);\n\n         this.fs.showAvailableFlights(this.flightForm).subscribe((res: any)=>{\n           this.availableFlights = res.data;\n           console.log(res)\n           console.log(this.availableFlights);\n           this.flightsSender.emit(this.availableFlights);\n         })\n       });\n     });\n   }\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}